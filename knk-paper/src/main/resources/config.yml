api:
  # Base URL for the KnK backend API
  # TODO: Update this to match your backend server
  base-url: "http://localhost:5294/api"
  
  # Enable debug logging (logs request URLs and latency)
  debug-logging: true
  
  # Allow untrusted SSL certificates (ONLY for development with self-signed certs)
  allow-untrusted-ssl: true
  
  # Authentication configuration
  auth:
    # Type: none, bearer, apikey
    type: none
    # Bearer token (only used if type=bearer)
    bearer-token: ""
    # API key (only used if type=apikey)
    api-key: ""
    # API key header name (only used if type=apikey)
    api-key-header: "X-API-Key"
  
  # HTTP timeouts (in seconds)
  timeouts:
    connect: 10
    read: 10
    write: 10

# Account management configuration (Phase 1+)
account:
  # Link code expiry time (in minutes)
  # How long a link code remains valid before expiring
  link-code-expiry-minutes: 20
  
  # Chat capture timeout (in seconds)
  # Maximum time to wait for player chat input during account creation
  chat-capture-timeout-seconds: 120
  
  # Command cooldowns (Phase 5) - Prevents spam and rate limits expensive operations
  cooldowns:
    # Cooldown for /account create command (seconds)
    # Prevents players from spamming account creation
    account-create-seconds: 300  # 5 minutes
    
    # Cooldown for generating link codes (seconds)
    # Rate limit for /account link (no args)
    link-code-generate-seconds: 60  # 1 minute
    
    # Cooldown for consuming link codes (seconds)
    # Rate limit for /account link <code>
    link-code-consume-seconds: 10  # 10 seconds
    
    # Cleanup interval for expired cooldowns (minutes)
    # How often to remove stale cooldown entries from memory
    cleanup-interval-minutes: 5

# Messages configuration
messages:
  # Prefix for all plugin messages
  prefix: "&8[&6KnK&8] &r"
  
  # Account created successfully
  account-created: "&aAccount created successfully! You can now log in on the web app."
  
  # Accounts linked
  account-linked: "&aYour accounts have been linked!"
  
  # Link code generated
  link-code-generated: "&aYour link code is: &6{code}&a. Use this code in the web app. Expires in {minutes} minutes."
  
  # Invalid or expired link code
  invalid-link-code: "&cThis code is invalid or has expired. Use &6/account link &cto get a new one."
  
  # Duplicate account detected
  duplicate-account: "&cYou have two accounts. Please choose which one to keep."
  
  # Merge complete
  merge-complete: "&aAccount merge complete. Your account now has {coins} coins, {gems} gems, and {exp} XP."

# Cache configuration
cache:
  # Global time-to-live for cached API responses (in seconds)
  # After this duration, cached data is considered stale and will be refetched
  # Recommended: 60-300 seconds (1-5 minutes) depending on data freshness requirements
  ttl-seconds: 60
  
  # Per-entity cache and data access settings (overrides global TTL and policy defaults)
  entities:
    users:
      ttl-minutes: 15          # Cache TTL (minutes)
      max-ttl-minutes: 60      # Maximum allowed TTL
      default-policy: CACHE_FIRST  # Default fetch policy (CACHE_ONLY, CACHE_FIRST, API_ONLY, API_THEN_CACHE_REFRESH, STALE_OK)
      allow-stale: true        # Allow serving stale data
      retry-attempts: 3        # Max retry attempts for API failures
      retry-backoff-ms: 100    # Initial retry delay (milliseconds)
    
    towns:
      ttl-minutes: 30
      max-ttl-minutes: 240
      default-policy: CACHE_FIRST
      allow-stale: true
      retry-attempts: 3
      retry-backoff-ms: 100
    
    districts:
      ttl-minutes: 30
      max-ttl-minutes: 240
      default-policy: CACHE_FIRST
      allow-stale: true
      retry-attempts: 3
      retry-backoff-ms: 100
    
    structures:
      ttl-minutes: 20
      max-ttl-minutes: 120
      default-policy: CACHE_FIRST
      allow-stale: true
      retry-attempts: 3
      retry-backoff-ms: 100
    
    streets:
      ttl-minutes: 60
      max-ttl-minutes: 480
      default-policy: CACHE_FIRST
      allow-stale: true
      retry-attempts: 3
      retry-backoff-ms: 100
    
    locations:
      ttl-minutes: 20
      max-ttl-minutes: 120
      default-policy: CACHE_FIRST
      allow-stale: true
      retry-attempts: 3
      retry-backoff-ms: 100
    
    domains:
      ttl-minutes: 30
      max-ttl-minutes: 240
      default-policy: CACHE_FIRST
      allow-stale: true
      retry-attempts: 3
      retry-backoff-ms: 100
    
    health:
      ttl-seconds: 30          # Health uses seconds (short TTL)
      max-ttl-seconds: 120
      default-policy: CACHE_FIRST
      allow-stale: false       # Don't serve stale health checks
      retry-attempts: 2        # Fewer retries for health checks
      retry-backoff-ms: 50
